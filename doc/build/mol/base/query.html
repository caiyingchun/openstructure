

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Queries &mdash; OpenStructure v1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="OpenStructure v1.0 documentation" href="../../index.html" />
    <link rel="up" title="mol – Molecular structures and surfaces" href="mol.html" />
    <link rel="next" title="seq – Sequences and Alignments" href="../../seq/base/seq.html" />
    <link rel="prev" title="Editors" href="editors.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../../seq/base/seq.html" title="seq – Sequences and Alignments"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="editors.html" title="Editors"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">OpenStructure v1.0 documentation</a> &raquo;</li>
          <li><a href="mol.html" accesskey="U"><tt class="docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal"><span class="pre">mol</span></tt> &#8211; Molecular structures and surfaces</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Queries</a><ul>
<li><a class="reference internal" href="#the-query-language-reference">The query language reference</a><ul>
<li><a class="reference internal" href="#abbreviations">Abbreviations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generic-properties-in-queries">Generic Properties in Queries</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="editors.html"
                        title="previous chapter">Editors</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../seq/base/seq.html"
                        title="next chapter"><tt class="docutils literal docutils literal"><span class="pre">seq</span></tt> &#8211; Sequences and Alignments</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/mol/base/query.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="queries">
<h1>Queries<a class="headerlink" href="#queries" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="Query">
<em class="property">class </em><tt class="descname">Query</tt><a class="headerlink" href="#Query" title="Permalink to this definition">¶</a></dt>
<dd><p>Blabla</p>
</dd></dl>

<p>It is often convenient to highlight or focus certain parts of the structure.
OpenStructure includes a powerful query system that allows you to perform custom
selections in a convenient way.</p>
<p>Please refer to the tutorial on the query language for an introduction.</p>
<div class="section" id="the-query-language-reference">
<h2>The query language reference<a class="headerlink" href="#the-query-language-reference" title="Permalink to this headline">¶</a></h2>
<p>The query consists of one or more predicates combined with boolean
operators. A predicate takes the form <em>prop op value</em>. Operators are
one of `` =, !=, &gt;, &gt;=, &lt;=`` and <tt class="docutils literal"><span class="pre">&lt;</span></tt>. A predicate has the following form:
<em>PROPERTY - OPERATOR - ARGUMENT</em>.</p>
<p>The following properties may be used in predicates. The supported type of the
value is given for each property.</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">rname</span></tt> residue name. type: string</li>
<li><tt class="docutils literal"><span class="pre">rnum</span></tt> residue number. currently only numeric part is honored.
type: int</li>
<li><tt class="docutils literal"><span class="pre">rtype</span></tt> residue type as given by the DSSP code, i.e. H for helix, E
for extended. type: string</li>
<li><tt class="docutils literal"><span class="pre">aname</span></tt> atom name. type: string</li>
<li><tt class="docutils literal"><span class="pre">ele</span></tt> element of atom. type: string</li>
<li><tt class="docutils literal"><span class="pre">cname</span></tt> chain name. type: string</li>
<li><tt class="docutils literal"><span class="pre">occ</span></tt> occupancy, between 0 and 1. type: float</li>
<li><tt class="docutils literal"><span class="pre">abfac</span></tt> B (temperature) factor of atom. type: float</li>
<li><tt class="docutils literal"><span class="pre">rbfac</span></tt> average B (temperature) factor of residue. type: float.
Note that this does not work for views as expected. When running a
second selection statement on a view, all atoms of the residue handle
and not the view are considered in the calculation</li>
<li><tt class="docutils literal"><span class="pre">ishetatm</span></tt> whether the atom is a hetorogenous atom. type: bool or int
(0 for false, 1 for true)</li>
<li><tt class="docutils literal"><span class="pre">peptide</span></tt> whether the residue is peptide linking. type: bool or int
(0 for false, 1 for true)</li>
<li><tt class="docutils literal"><span class="pre">x</span></tt>  X coordinate of atom. type: float</li>
<li><tt class="docutils literal"><span class="pre">y</span></tt>  Y coordinate of atom. type: float</li>
<li><tt class="docutils literal"><span class="pre">z</span></tt>  Z coordinate of atom. type: float</li>
<li><tt class="docutils literal"><span class="pre">rindex</span></tt> index of residue in chain. This index is the same for views
and handles</li>
<li>For <a class="reference internal" href="#genprop-in-queries"><em>generic properties in queries</em></a> see below.</li>
</ul>
</blockquote>
<p>Distance-based selections within a given atom position are supported by
the within statement. To select atoms within 5 Angstrom of the point
<tt class="docutils literal"><span class="pre">{1,</span> <span class="pre">2,</span> <span class="pre">3}</span></tt>, one would write:</p>
<p><tt class="docutils literal"><span class="pre">5</span> <span class="pre">&lt;&gt;</span> <span class="pre">{1,2,3}</span></tt></p>
<p>Negation of this expression is possible with the not operator, i.e.</p>
<p><tt class="docutils literal"><span class="pre">not</span> <span class="pre">5</span> <span class="pre">&lt;&gt;</span> <span class="pre">{1,2,3}</span></tt>
will select atoms that are further than five Angstrom apart from <tt class="docutils literal"><span class="pre">{1,</span> <span class="pre">2</span> <span class="pre">,</span> <span class="pre">3}</span></tt></p>
<div class="section" id="abbreviations">
<h3>Abbreviations<a class="headerlink" href="#abbreviations" title="Permalink to this headline">¶</a></h3>
<p>Two abbreviations exist for convenience:</p>
<p>Instead of writing</p>
<p><tt class="docutils literal"><span class="pre">aname=CA</span> <span class="pre">or</span> <span class="pre">aname=C</span> <span class="pre">or</span> <span class="pre">aname=O</span> <span class="pre">or</span> <span class="pre">aname=N</span></tt>,</p>
<p>one can write</p>
<p><tt class="docutils literal"><span class="pre">aname=CA,N,C,O</span></tt>.</p>
<p>For integral value ranges, one can use the colon syntax: instead of</p>
<p><tt class="docutils literal"><span class="pre">rnum&gt;=10</span> <span class="pre">and</span> <span class="pre">rnum&lt;=20</span></tt></p>
<p>one can write</p>
<p><tt class="docutils literal"><span class="pre">rnum=10:20</span></tt></p>
</div>
</div>
<div class="section" id="generic-properties-in-queries">
<span id="genprop-in-queries"></span><h2>Generic Properties in Queries<a class="headerlink" href="#generic-properties-in-queries" title="Permalink to this headline">¶</a></h2>
<p>The query language can also be used for numeric generic properties (i.e.
float and int), but the syntax is slightly different. To access any generic
properties, it needs to be specified that they are generic and at which level
they are defined. Therefore, all generic properties start with a <tt class="docutils literal"><span class="pre">g</span></tt>, followed by an <tt class="docutils literal"><span class="pre">a</span></tt>, <tt class="docutils literal"><span class="pre">r</span></tt> or <tt class="docutils literal"><span class="pre">c</span></tt> for atom, residue or chain level respectively.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># set generic properties for atom, residue, chain</span>
<span class="n">atom_handle</span><span class="o">.</span><span class="n">SetFloatProp</span><span class="p">(</span><span class="s">&quot;testpropatom&quot;</span><span class="p">,</span> <span class="mf">5.2</span><span class="p">)</span>
<span class="n">resid_handle</span><span class="o">.</span><span class="n">SetFloatProp</span><span class="p">(</span><span class="s">&quot;testpropres&quot;</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">)</span>
<span class="n">chain_handle</span><span class="o">.</span><span class="n">SetIntProp</span><span class="p">(</span><span class="s">&quot;testpropchain&quot;</span><span class="p">,</span> <span class="mf">10</span><span class="p">)</span>

<span class="c"># query statements</span>
<span class="n">sel_a</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="s">&quot;gatestpropatom&lt;=10.0&quot;</span><span class="p">)</span>
<span class="n">sel_r</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="s">&quot;grtestpropres=1.0&quot;</span><span class="p">)</span>
<span class="n">sel_c</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="s">&quot;gctestpropchain&gt;5&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Since generic properties do not need to be defined for all parts of an entity
(e.g. it could be specified for one single <tt class="xref py py-class docutils literal"><span class="pre">AtomHandle</span></tt>), the query
statement will throw an error unless you specify a default value in the query
statement which can be done using a &#8216;:&#8217; character:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># if one or more atoms have no generic properties</span>

<span class="n">sel</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="s">&quot;gatestprop=5&quot;</span><span class="p">)</span>
<span class="c"># this will throw an error</span>

<span class="c"># you can specify a default value:</span>
<span class="n">sel</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="s">&quot;gatestprop:1.0=5&quot;</span><span class="p">)</span>
<span class="c"># this will run through smoothly and use 1.0 as</span>
<span class="c"># the default value for all atoms that do not</span>
<span class="c"># have the generic property &#39;testprop&#39;</span>
</pre></div>
</div>
<p>Using this method, you will be warned if a generic property is not set for all
atoms, residues or chains unless you specify a default value. So, be careful
when you do.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../../seq/base/seq.html" title="seq – Sequences and Alignments"
             >next</a> |</li>
        <li class="right" >
          <a href="editors.html" title="Editors"
             >previous</a> |</li>
        <li><a href="../../index.html">OpenStructure v1.0 documentation</a> &raquo;</li>
          <li><a href="mol.html" ><tt class="docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal"><span class="pre">mol</span></tt> &#8211; Molecular structures and surfaces</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, OpenStructure authors.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0b2.
    </div>
  </body>
</html>